import{f as e,q as a,s as l,I as t,y as s,H as c,J as o,d as u,m as r,c as n,e as d,ac as i,r as f,w as p,n as m,k as _,l as v,T as h,t as x,v as g,x as b,z as y,B as w,A as k,C,R as V,P as z,Q as I,K as j,ad as S,G as L,a0 as $,N as F,M as T,L as U,ae as B,_ as H,a4 as M,a5 as P,af as W,a9 as A,aa as G}from"./index-Dq5cXexY.js";import{_ as q}from"./IconX.vue_vue_type_script_setup_true_lang.CIkkXJXL.js";import{_ as J}from"./IconPlus.vue_vue_type_script_setup_true_lang.CwcYqQ2y.js";import{_ as K}from"./wd-navbar.Calwyos_.js";const N=e({__name:"IconCamera",props:{size:{},color:{}},setup:e=>(e,u)=>(l(),a(t,{size:e.size,color:e.color},{default:s((()=>[(l(),c("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[o("path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z"}),o("circle",{cx:"12",cy:"13",r:"3"})]))])),_:1},8,["size","color"]))}),Q=L(e({name:"wd-search",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},props:{...d,customInputClass:u(""),modelValue:u(""),useSuffixSlot:r(!1),placeholder:String,cancelTxt:String,light:r(!1),hideCancel:r(!1),disabled:r(!1),maxlength:n(-1),placeholderLeft:r(!1),focus:r(!1),focusWhenClear:r(!1),placeholderStyle:String,placeholderClass:u("")},emits:["update:modelValue","change","clear","search","focus","blur","cancel","click"],setup(e,{emit:t}){const c=e,o=t,{translate:u}=i("search"),r=f(!1),n=f(!1),d=f(""),L=f(!0),$=f(!1);p((()=>c.modelValue),(e=>{d.value=e,e&&(n.value=!0)}),{immediate:!0}),p((()=>c.focus),(e=>{if(e){if(c.disabled)return;B()}})),m((()=>{c.focus&&B()}));const F=_((()=>`wd-search  ${c.light?"is-light":""}  ${c.hideCancel?"is-without-cancel":""} ${c.customClass}`)),T=_((()=>{const e={display:""===d.value&&L.value?"flex":"none"};return v(e)}));async function U(e){n.value=e,await h(),r.value=e}async function B(){c.disabled||(await h(100),L.value=!1,U(!0))}function H(e){d.value=e.detail.value,o("update:modelValue",e.detail.value),o("change",{value:e.detail.value})}async function M(){d.value="",c.focusWhenClear&&($.value=!0,r.value=!1),await h(),c.focusWhenClear?(L.value=!1,U(!0)):(L.value=!0,U(!1)),o("change",{value:""}),o("update:modelValue",""),o("clear")}function P({detail:{value:e}}){o("search",{value:e})}function W(){L.value=!1,o("focus",{value:d.value})}async function A(){await h(150),$.value?$.value=!1:(L.value=!d.value,n.value=!L.value,r.value=!1,o("blur",{value:d.value}))}function G(){o("cancel",{value:d.value})}function q(){c.disabled&&o("click")}return(e,t)=>{const c=V,o=x,i=S;return l(),a(o,{class:b(F.value),style:g(e.customStyle)},{default:s((()=>[y(o,{class:"wd-search__block",onClick:q},{default:s((()=>[w(e.$slots,"prefix",{},void 0,!0),y(o,{class:"wd-search__field"},{default:s((()=>[e.placeholderLeft?k("",!0):(l(),a(o,{key:0,style:g(T.value),class:"wd-search__cover",onClick:B},{default:s((()=>[y(C,{name:"search","custom-class":"wd-search__search-icon"}),y(c,{class:b(`wd-search__placeholder-txt ${e.placeholderClass}`)},{default:s((()=>[z(I(e.placeholder||j(u)("search")),1)])),_:1},8,["class"])])),_:1},8,["style"])),n.value||d.value||e.placeholderLeft?(l(),a(C,{key:1,name:"search","custom-class":"wd-search__search-left-icon"})):k("",!0),n.value||d.value||e.placeholderLeft?(l(),a(i,{key:2,placeholder:e.placeholder||j(u)("search"),"placeholder-class":`wd-search__placeholder-txt ${e.placeholderClass}`,"placeholder-style":e.placeholderStyle,"confirm-type":"search",modelValue:d.value,"onUpdate:modelValue":t[0]||(t[0]=e=>d.value=e),class:b(["wd-search__input",e.customInputClass]),onFocus:W,onInput:H,onBlur:A,onConfirm:P,disabled:e.disabled,maxlength:e.maxlength,focus:r.value},null,8,["placeholder","placeholder-class","placeholder-style","modelValue","class","disabled","maxlength","focus"])):k("",!0),d.value?(l(),a(C,{key:3,"custom-class":"wd-search__clear wd-search__clear-icon",name:"error-fill",onClick:M})):k("",!0)])),_:1})])),_:3}),e.hideCancel?k("",!0):w(e.$slots,"suffix",{key:0},(()=>[y(o,{class:"wd-search__cancel",onClick:G},{default:s((()=>[z(I(e.cancelTxt||j(u)("cancel")),1)])),_:1})]),!0)])),_:3},8,["class","style"])}}}),[["__scopeId","data-v-5c863c3f"]]),R=L(e({__name:"index",setup(e){const t=f(""),o=f(!1),u=f(null),r=f(1),n=f(""),d=[{name:"燕麦粥",unit:"100g",calories:68,protein:2.4,fat:1.4,carbs:12},{name:"煮鸡蛋",unit:"1个",calories:78,protein:6.3,fat:5.3,carbs:.6},{name:"全麦面包",unit:"1片",calories:90,protein:3.5,fat:1.2,carbs:17},{name:"牛奶",unit:"100ml",calories:60,protein:3.2,fat:3.4,carbs:4.8},{name:"糙米饭",unit:"100g",calories:111,protein:2.6,fat:.9,carbs:23},{name:"鸡胸肉",unit:"100g",calories:133,protein:24,fat:5,carbs:0},{name:"西兰花",unit:"100g",calories:34,protein:2.8,fat:.4,carbs:6.6},{name:"三文鱼",unit:"100g",calories:206,protein:20,fat:13,carbs:0}],i=_((()=>t.value?d.filter((e=>e.name.includes(t.value))):d)),p=[{name:"份",ratio:1},{name:"100g",ratio:1},{name:"克",ratio:.01}],m=_((()=>{var e;if(!u.value)return{calories:0,protein:0,fat:0,carbs:0};const a=(null==(e=p.find((e=>e.name===n.value)))?void 0:e.ratio)||1,l=parseFloat(r.value.toString())||0;return{calories:Math.round(u.value.calories*a*l),protein:(u.value.protein*a*l).toFixed(1),fat:(u.value.fat*a*l).toFixed(1),carbs:(u.value.carbs*a*l).toFixed(1)}}));function v(){M()}function h(){P({title:"已添加",icon:"success"}),o.value=!1,setTimeout((()=>M()),1e3)}function g(){W({itemList:["拍照识别","相册导入"],success:e=>{A({title:"AI 识别中..."}),setTimeout((()=>{G(),P({title:"识别功能开发中",icon:"none"})}),1500)}})}return(e,d)=>{const f=K,_=Q,w=x,C=V,L=J,M=q,P=S,W=H,A=B,G=N,R=$("layout-default-uni"),X=$("global-ku-root");return l(),a(X,null,{default:s((()=>[y(R,null,{default:s((()=>[y(w,{class:"page-container bg-[var(--page-bg)] min-h-screen"},{default:s((()=>[y(w,{class:"header-container fixed top-0 left-0 w-full z-10 bg-[var(--page-bg)]"},{default:s((()=>[y(f,{title:"选择食物","left-arrow":"",onClickLeft:v}),y(w,{class:"bg-[var(--card-bg)] px-4 py-3 border-b border-[var(--border-color)]"},{default:s((()=>[y(_,{modelValue:j(t),"onUpdate:modelValue":d[0]||(d[0]=e=>F(t)?t.value=e:null),placeholder:"搜索食物...","hide-cancel":""},null,8,["modelValue"])])),_:1})])),_:1}),y(w,{class:"h-[100px]"}),y(w,{class:"px-4 py-4 space-y-3 pb-32"},{default:s((()=>[(l(!0),c(T,null,U(j(i),((e,t)=>(l(),a(w,{key:t,class:"bg-[var(--card-bg)] rounded-xl p-4 shadow-sm active:bg-gray-50 flex justify-between items-center w-full",onClick:a=>function(e){u.value=e,n.value="100g"===e.unit?"100g":"份",r.value=1,o.value=!0}(e)},{default:s((()=>[y(w,null,{default:s((()=>[y(w,{class:"text-sm font-bold text-[var(--text-main)] mb-1"},{default:s((()=>[z(I(e.name),1)])),_:2},1024),y(w,{class:"flex gap-3 text-[10px] text-[var(--text-sub)]"},{default:s((()=>[y(C,null,{default:s((()=>[z(I(e.calories)+"kcal / "+I(e.unit),1)])),_:2},1024),y(C,null,{default:s((()=>[z("P:"+I(e.protein)+"g F:"+I(e.fat)+"g C:"+I(e.carbs)+"g",1)])),_:2},1024)])),_:2},1024)])),_:2},1024),y(L,{size:"16",color:"#10b981"})])),_:2},1032,["onClick"])))),128))])),_:1}),y(A,{modelValue:j(o),"onUpdate:modelValue":d[3]||(d[3]=e=>F(o)?o.value=e:null),position:"bottom","custom-style":"border-radius: 20px 20px 0 0; background: white;"},{default:s((()=>[j(u)?(l(),a(w,{key:0,class:"p-6"},{default:s((()=>[y(w,{class:"flex justify-between items-center mb-10"},{default:s((()=>[y(w,{class:"p-2",onClick:d[1]||(d[1]=e=>o.value=!1)},{default:s((()=>[y(M,{size:"20",color:"#111827"})])),_:1}),y(C,{class:"text-lg font-bold text-gray-900"},{default:s((()=>[z(I(j(u).name),1)])),_:1}),y(w,{class:"w-8"})])),_:1}),y(w,{class:"grid grid-cols-4 gap-4 text-center mb-10"},{default:s((()=>[y(w,null,{default:s((()=>[y(w,{class:"text-lg font-bold text-gray-900"},{default:s((()=>[z(I(j(m).calories),1)])),_:1}),y(w,{class:"text-[10px] text-gray-400"},{default:s((()=>[z("千卡")])),_:1})])),_:1}),y(w,null,{default:s((()=>[y(w,{class:"text-lg font-bold text-gray-900"},{default:s((()=>[z(I(j(m).carbs),1)])),_:1}),y(w,{class:"text-[10px] text-gray-400"},{default:s((()=>[z("碳水")])),_:1})])),_:1}),y(w,null,{default:s((()=>[y(w,{class:"text-lg font-bold text-gray-900"},{default:s((()=>[z(I(j(m).protein),1)])),_:1}),y(w,{class:"text-[10px] text-gray-400"},{default:s((()=>[z("蛋白质")])),_:1})])),_:1}),y(w,null,{default:s((()=>[y(w,{class:"text-lg font-bold text-gray-900"},{default:s((()=>[z(I(j(m).fat),1)])),_:1}),y(w,{class:"text-[10px] text-gray-400"},{default:s((()=>[z("脂肪")])),_:1})])),_:1})])),_:1}),y(w,{class:"flex flex-col items-center mb-10"},{default:s((()=>[y(w,{class:"flex items-center gap-6"},{default:s((()=>[y(w,{class:"text-4xl font-bold text-gray-900 border-b-2 border-gray-100 pb-2 px-6"},{default:s((()=>[y(P,{type:"digit",modelValue:j(r),"onUpdate:modelValue":d[2]||(d[2]=e=>F(r)?r.value=e:null),class:"text-center w-24"},null,8,["modelValue"])])),_:1})])),_:1}),y(C,{class:"text-xs text-gray-400 mt-4"},{default:s((()=>[z("输入数量 ("+I(j(n))+")",1)])),_:1})])),_:1}),y(w,{class:"flex justify-center gap-4 mb-10"},{default:s((()=>[(l(),c(T,null,U(p,(e=>y(w,{key:e.name,class:b(["px-4 py-2 rounded-full border transition-all",j(n)===e.name?"bg-emerald-500 border-emerald-500 text-white":"bg-gray-50 border-gray-100 text-gray-500"]),onClick:a=>n.value=e.name},{default:s((()=>[y(C,{class:"text-sm"},{default:s((()=>[z(I(e.name),1)])),_:2},1024)])),_:2},1032,["class","onClick"]))),64))])),_:1}),y(W,{block:"",size:"large",onClick:h},{default:s((()=>[z("确定")])),_:1})])),_:1})):k("",!0)])),_:1},8,["modelValue"]),y(w,{class:"fixed bottom-10 right-6 w-14 h-14 bg-emerald-500 rounded-full shadow-lg flex items-center justify-center z-20",onClick:g},{default:s((()=>[y(G,{size:"24",color:"white"})])),_:1})])),_:1})])),_:1})])),_:1})}}}),[["__scopeId","data-v-80053dce"]]);export{R as default};
