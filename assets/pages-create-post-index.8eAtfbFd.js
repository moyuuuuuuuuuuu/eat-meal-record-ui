import{a6 as e,m as a,e as l,f as t,k as s,W as o,l as r,X as n,q as u,s as i,t as d,v as c,x as m,y as f,z as x,a7 as p,G as b,I as v,H as _,J as g,r as y,a0 as h,K as w,R as k,P as V,a3 as C,A as z,a8 as j,N as I,Q as $,M as T,L as B,a4 as S,a9 as L,aa as D,a5 as M}from"./index-Dq5cXexY.js";import{_ as N}from"./wd-navbar.Calwyos_.js";import{_ as H,a as q}from"./IconVideo.vue_vue_type_script_setup_true_lang.B5nfyJ32.js";import{_ as A}from"./IconChevronRight.vue_vue_type_script_setup_true_lang.DAbOJsUn.js";import{_ as G}from"./IconX.vue_vue_type_script_setup_true_lang.CIkkXJXL.js";const O=b(t({name:"wd-switch",options:{addGlobalClass:!0,virtualHost:!0,styleIsolation:"shared"},props:{...l,modelValue:{type:[Boolean,String,Number],required:!0,default:!1},disabled:a(!1),activeValue:{type:[Boolean,String,Number],default:!0},inactiveValue:{type:[Boolean,String,Number],default:!1},activeColor:String,inactiveColor:String,size:{type:e},beforeChange:Function},emits:["change","update:modelValue"],setup(e,{emit:a}){const l=e,t=a,b=s((()=>`wd-switch ${l.customClass} ${l.disabled?"is-disabled":""} ${l.modelValue===l.activeValue?"is-checked":""}`)),v=s((()=>{const e={background:l.modelValue===l.activeValue?l.activeColor:l.inactiveColor,"border-color":l.modelValue===l.activeValue?l.activeColor:l.inactiveColor};return l.size&&(e["font-size"]=o(l.size)),`${r(e)}${l.customStyle}`})),_=s((()=>l.modelValue===l.activeValue&&l.activeColor||l.modelValue!==l.activeValue&&l.inactiveColor?"box-shadow: none;":""));function g(){if(l.disabled)return;const e=l.modelValue===l.activeValue?l.inactiveValue:l.activeValue;l.beforeChange&&p(l.beforeChange)?l.beforeChange({value:e,resolve:a=>{a&&(t("update:modelValue",e),t("change",{value:e}))}}):(t("update:modelValue",e),t("change",{value:e}))}return n((()=>{-1===[l.activeValue,l.inactiveValue].indexOf(l.modelValue)&&(t("update:modelValue",l.inactiveValue),t("change",{value:l.inactiveValue}))})),(e,a)=>{const l=d;return i(),u(l,{class:m(b.value),style:c(v.value),onClick:g},{default:f((()=>[x(l,{class:"wd-switch__circle",style:c(_.value)},null,8,["style"])])),_:1},8,["class","style"])}}}),[["__scopeId","data-v-ce4bf3e3"]]),P=t({__name:"IconHash",props:{size:{},color:{}},setup:e=>(e,a)=>(i(),u(v,{size:e.size,color:e.color},{default:f((()=>[(i(),_("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[g("line",{x1:"4",y1:"9",x2:"20",y2:"9"}),g("line",{x1:"4",y1:"15",x2:"20",y2:"15"}),g("line",{x1:"10",y1:"3",x2:"8",y2:"21"}),g("line",{x1:"16",y1:"3",x2:"14",y2:"21"})]))])),_:1},8,["size","color"]))}),R=t({__name:"IconMapPin",props:{size:{},color:{}},setup:e=>(e,a)=>(i(),u(v,{size:e.size,color:e.color},{default:f((()=>[(i(),_("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[g("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),g("circle",{cx:"12",cy:"10",r:"3"})]))])),_:1},8,["size","color"]))}),U=b(t({__name:"index",setup(e){const a=y(""),l=y(!1),t=y([]),s=y([]),o=y(!1),r=["#健康饮食","#减脂餐","#全天打卡","#增肌","#营养均衡","#自制午餐"],n=e=>{const a=new Date;return a.setDate(a.getDate()-e),0===e?"今天":1===e?"昨天":`${a.getMonth()+1}月${a.getDate()}日`},p=[{date:"2026-01-29",dateLabel:n(0),meals:[{id:"1-1",mealType:"早餐",items:[{name:"燕麦粥",amount:"200g",calories:150},{name:"煮鸡蛋",amount:"1个",calories:78}],totalCalories:228},{id:"1-2",mealType:"午餐",items:[{name:"糙米饭",amount:"150g",calories:171},{name:"鸡胸肉",amount:"120g",calories:130}],totalCalories:301}]},{date:"2026-01-28",dateLabel:n(1),meals:[{id:"2-1",mealType:"晚餐",items:[{name:"蔬菜沙拉",amount:"200g",calories:85},{name:"煎牛排",amount:"150g",calories:250}],totalCalories:335}]}];function b(){S()}function v(e){const a=s.value.findIndex((a=>a.id===e.id));a>-1?s.value.splice(a,1):s.value.push(e)}function g(){a.value.trim()&&(L({title:"正在发布..."}),setTimeout((()=>{D(),M({title:"发布成功",icon:"success"}),setTimeout((()=>S()),1500)}),1e3))}return(e,n)=>{const y=k,S=d,L=N,D=j,M=O,U=C,X=h("layout-default-uni"),F=h("global-ku-root");return i(),u(F,null,{default:f((()=>[x(X,null,{default:f((()=>[x(S,{class:"page-container bg-[var(--page-bg)] h-screen flex flex-col overflow-hidden"},{default:f((()=>[x(L,{title:"发布动态",fixed:"",placeholder:"","left-arrow":"",onClickLeft:b},{right:f((()=>[x(S,{class:m(["publish-btn",{disabled:!w(a).trim()}]),onClick:g},{default:f((()=>[x(y,null,{default:f((()=>[V("发布")])),_:1})])),_:1},8,["class"])])),_:1}),x(U,{"scroll-y":"",class:"flex-1 w-full"},{default:f((()=>[x(S,{class:"p-4 space-y-4 pb-10 w-full"},{default:f((()=>[x(S,{class:"bg-[var(--card-bg)] rounded-xl p-4 shadow-sm"},{default:f((()=>[x(D,{modelValue:w(a),"onUpdate:modelValue":n[0]||(n[0]=e=>I(a)?a.value=e:null),class:"w-full min-h-[160px] text-base text-[var(--text-main)]",placeholder:"分享你的饮食心得...",maxlength:500},null,8,["modelValue"]),x(S,{class:"flex items-center justify-between mt-4 pb-2 border-b border-[var(--border-color)]"},{default:f((()=>[x(S,{class:"flex gap-4"},{default:f((()=>[x(H,{size:"22",color:"#9ca3af"}),x(q,{size:"22",color:"#9ca3af"})])),_:1}),x(y,{class:"text-xs text-[var(--text-sub)]"},{default:f((()=>[V($(w(a).length)+"/500",1)])),_:1})])),_:1})])),_:1}),x(S,{class:"bg-[var(--card-bg)] rounded-xl p-4 shadow-sm"},{default:f((()=>[x(S,{class:"flex items-center gap-2 mb-4"},{default:f((()=>[x(P,{size:"18",color:"#10b981"}),x(y,{class:"text-sm font-bold text-[var(--text-main)]"},{default:f((()=>[V("推荐话题")])),_:1})])),_:1}),x(S,{class:"flex flex-wrap gap-2"},{default:f((()=>[(i(),_(T,null,B(r,(e=>x(S,{key:e,class:m(["px-3 py-1.5 rounded-full text-xs transition-all border",w(t).includes(e)?"bg-emerald-500 border-emerald-500 text-white":"bg-[var(--page-bg)] border-[var(--border-color)] text-[var(--text-sub)]"]),onClick:a=>function(e){const a=t.value.indexOf(e);a>-1?t.value.splice(a,1):t.value.push(e)}(e)},{default:f((()=>[V($(e),1)])),_:2},1032,["class","onClick"]))),64))])),_:1})])),_:1}),x(S,{class:"bg-[var(--card-bg)] rounded-xl p-4 shadow-sm"},{default:f((()=>[x(S,{class:"flex items-center justify-between",onClick:n[1]||(n[1]=e=>o.value=!w(o))},{default:f((()=>[x(S,{class:"flex items-center gap-3"},{default:f((()=>[x(S,{class:"w-8 h-8 rounded-lg bg-emerald-100 flex items-center justify-center"},{default:f((()=>[x(y,{class:"text-emerald-600 text-xs font-bold"},{default:f((()=>[V("餐")])),_:1})])),_:1}),x(y,{class:"text-sm font-medium text-[var(--text-main)]"},{default:f((()=>[V($(w(s).length>0?`已关联 ${w(s).length}个餐食`:"关联餐食记录"),1)])),_:1})])),_:1}),x(A,{size:"16",color:"#9ca3af",style:c({transform:w(o)?"rotate(90deg)":"rotate(0)",transition:"all 0.3s"})},null,8,["style"])])),_:1}),w(o)?(i(),u(S,{key:0,class:"mt-4 space-y-4 max-h-[400px] overflow-y-auto pt-2 border-t border-[var(--border-color)]"},{default:f((()=>[(i(),_(T,null,B(p,(e=>x(S,{key:e.date},{default:f((()=>[x(S,{class:"text-[10px] text-[var(--text-sub)] mb-2 uppercase tracking-tight"},{default:f((()=>[V($(e.dateLabel),1)])),_:2},1024),x(S,{class:"space-y-2"},{default:f((()=>[(i(!0),_(T,null,B(e.meals,(e=>(i(),u(S,{key:e.id,class:m(["p-3 rounded-lg border-2 transition-all",w(s).some((a=>a.id===e.id))?"border-emerald-500 bg-emerald-50/50":"border-[var(--border-color)] bg-[var(--page-bg)]"]),onClick:a=>v(e)},{default:f((()=>[x(S,{class:"flex items-center justify-between mb-1"},{default:f((()=>[x(y,{class:"text-xs font-bold text-[var(--text-main)]"},{default:f((()=>[V($(e.mealType),1)])),_:2},1024),x(y,{class:"text-[10px] text-emerald-600"},{default:f((()=>[V($(e.totalCalories)+" kcal",1)])),_:2},1024)])),_:2},1024),x(S,{class:"flex flex-wrap gap-1"},{default:f((()=>[(i(!0),_(T,null,B(e.items,((e,a)=>(i(),u(y,{key:a,class:"text-[9px] bg-[var(--card-bg)] px-1.5 py-0.5 rounded text-[var(--text-sub)] border border-[var(--border-color)]"},{default:f((()=>[V($(e.name),1)])),_:2},1024)))),128))])),_:2},1024)])),_:2},1032,["class","onClick"])))),128))])),_:2},1024)])),_:2},1024))),64))])),_:1})):z("",!0)])),_:1}),w(s).length>0&&!w(o)?(i(),u(S,{key:0,class:"space-y-2"},{default:f((()=>[(i(!0),_(T,null,B(w(s),(e=>(i(),u(S,{key:e.id,class:"bg-gradient-to-r from-emerald-50/50 to-teal-50/50 rounded-lg p-3 border border-emerald-100 flex items-center justify-between"},{default:f((()=>[x(S,{class:"flex items-center gap-3"},{default:f((()=>[x(S,{class:"w-6 h-6 rounded bg-emerald-500 flex items-center justify-center"},{default:f((()=>[x(y,{class:"text-white text-[10px]"},{default:f((()=>[V("餐")])),_:1})])),_:1}),x(S,null,{default:f((()=>[x(y,{class:"text-xs font-bold text-[var(--text-main)] block"},{default:f((()=>[V($(e.mealType),1)])),_:2},1024),x(y,{class:"text-[9px] text-[var(--text-sub)]"},{default:f((()=>[V($(e.items.map((e=>e.name)).join(", "))+" ("+$(e.totalCalories)+"kcal) ",1)])),_:2},1024)])),_:2},1024)])),_:2},1024),x(S,{class:"p-1",onClick:a=>v(e)},{default:f((()=>[x(G,{size:"14",color:"#9ca3af"})])),_:2},1032,["onClick"])])),_:2},1024)))),128))])),_:1})):z("",!0),x(S,{class:"bg-[var(--card-bg)] rounded-xl p-4 shadow-sm flex items-center justify-between"},{default:f((()=>[x(S,{class:"flex items-center gap-3"},{default:f((()=>[x(R,{size:"18",color:"#9ca3af"}),x(y,{class:"text-sm font-medium text-[var(--text-main)]"},{default:f((()=>[V("显示位置")])),_:1})])),_:1}),x(M,{modelValue:w(l),"onUpdate:modelValue":n[2]||(n[2]=e=>I(l)?l.value=e:null),size:"small","active-color":"#10b981"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})}}}),[["__scopeId","data-v-12dac625"]]);export{U as default};
